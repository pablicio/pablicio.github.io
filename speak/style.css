:root{
  --bg:#071024;
  --surface:#081427;
  --card:#0f1728;
  --muted:#9aa4b2;
  --accent:#4f46e5;
  --accent-600:#4338ca;
  --accent-300:#93c5fd;
  --highlight-bg:rgba(255,255,255,0.06);
  --highlight-text:#eef2ff;
  --glass:rgba(255,255,255,0.03);
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,system-ui,Roboto,Arial,sans-serif;color:#e6eef8}
html,body{height:100%;overflow:hidden;background:linear-gradient(180deg,#071024 0%,#081427 100%);-webkit-font-smoothing:antialiased;}
body{display:flex;flex-direction:column;}

.header{
  position:fixed;top:0;left:0;right:0;z-index:50;
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 16px;background:linear-gradient(90deg,rgba(255,255,255,0.02),transparent);
  border-bottom:1px solid rgba(255,255,255,0.03);
}
.app-title h1{font-size:16px;font-weight:700;color:#f8fafc;}
.app-title p{font-size:12px;color:var(--muted)}
.icon-btn{background:rgba(255,255,255,0.03);border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-size:16px;transition:all .2s;}
.icon-btn:active{background:rgba(255,255,255,0.08);transform:scale(0.94);}

.file-card{
  position:fixed;top:66px;left:0;right:0;z-index:45;
  background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
  border-bottom:1px solid rgba(255,255,255,0.03);
  padding:12px 16px;box-shadow:0 8px 30px rgba(2,6,23,0.35);
}
.file-row{display:flex;gap:10px;align-items:center;justify-content:space-between}
.file-btn{
  background:linear-gradient(90deg,var(--accent),var(--accent-600));
  color:white;padding:10px 14px;border-radius:12px;border:none;font-weight:700;cursor:pointer;
  display:inline-flex;gap:8px;align-items:center;box-shadow:0 8px 30px rgba(79,70,229,0.18);
  transition:all .2s;
}
.file-btn:active{transform:scale(0.96);}
.file-name{color:var(--muted);font-size:13px;flex:1;text-align:left;margin-left:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;transition:color .3s,text-shadow .3s;}
.file-name.flash{color:#c7d2fe;text-shadow:0 0 6px rgba(147,197,253,0.6);}
.small-note{font-size:12px;color:var(--muted);margin-top:8px}

.preview{
  position:fixed;top:150px;bottom:100px;left:0;right:0;overflow-y:auto;
  -webkit-overflow-scrolling:touch;touch-action:pan-y;overscroll-behavior:contain;
  padding:16px;scroll-behavior:smooth;
}
.chunk{
  background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);
  border-radius:10px;padding:12px;margin-bottom:8px;cursor:pointer;
  transition:all .18s ease;opacity:.95;
}
.chunk:hover{background:rgba(255,255,255,0.02);opacity:1}
.chunk.current{
  background:var(--highlight-bg);
  color:var(--highlight-text);
  border-left:4px solid rgba(99,102,241,0.95);
  animation:pulseGlow 2s ease-in-out infinite;
}
@keyframes pulseGlow{
  0%,100%{box-shadow:0 6px 18px rgba(99,102,241,0.35);}
  50%{box-shadow:0 6px 24px rgba(99,102,241,0.65);}
}

.footer{
  position:fixed;left:50%;bottom:12px;transform:translateX(-50%);
  display:flex;align-items:center;gap:12px;
  padding:12px 16px;border-radius:16px;
  background:linear-gradient(180deg,rgba(10,14,24,0.9),rgba(8,10,20,0.85));
  box-shadow:0 12px 40px rgba(2,6,23,0.6);z-index:60;
  backdrop-filter:blur(6px);
}
.fab{width:54px;height:54px;border-radius:999px;border:none;background:linear-gradient(180deg,var(--accent),var(--accent-600));
  color:white;font-weight:700;display:inline-flex;align-items:center;justify-content:center;font-size:18px;box-shadow:0 12px 30px rgba(79,70,229,0.28);cursor:pointer;transition:all .2s;}
.fab:active{transform:scale(0.95);}
.small-btn{width:44px;height:44px;border-radius:10px;border:none;background:rgba(255,255,255,0.03);color:var(--muted);display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;}
.small-btn:active{transform:scale(0.92);background:rgba(255,255,255,0.08);}
.chunk code, .chunk pre {
  background: #181e2b;
  color: #aee7ff;
  border-radius: 6px;
  padding: 2px 6px;
  font-family: 'Fira Mono', 'Consolas', 'Menlo', monospace;
  font-size: 14px;
  overflow-x: auto;
  display: inline-block;
  margin: 2px 0;
}
.chunk pre {
  background: #1e2430;
  border-radius: 8px;
  padding: 16px;
  margin: 12px 0;
  overflow-x: auto;
}
.chunk kbd, .chunk .math, .chunk .katex {
  background: #232b3a;
  color: #ffe066;
  border-radius: 4px;
  padding: 2px 6px;
  font-family: 'Fira Mono', 'Consolas', 'Menlo', monospace;
  font-size: 15px;
  margin: 2px 0;
  display: inline-block;
}
.chunk pre code {
  background: transparent !important;
  padding: 0;
  border-radius: 0;
  font-family: 'Fira Code', 'Fira Mono', Consolas, monospace;
  font-size: 14px;
  line-height: 1.5;
  color: #e5e9f0;
}
.mermaid {
  background: #181e2b;
  border-radius: 8px;
  padding: 16px;
  margin: 12px 0;
  overflow-x: auto;
  color: #e6eef8;
  font-size: 16px;
  line-height: 1.3;
}
.chunk .math-display,
.chunk .katex-display {
  overflow-x: auto;
  padding: 1em 0;
  margin: 0.5em 0;
  background: transparent;
}

.chunk .katex {
  font-size: 1.1em;
  font-family: KaTeX_Main, 'Times New Roman', serif;
  line-height: 1.4;
}

.chunk .katex-html {
  white-space: normal;
  word-wrap: break-word;
}